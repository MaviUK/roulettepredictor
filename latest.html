<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette Predictor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #333;
            text-align: center;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .input-section, .wheel-section, .stats-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-section {
            flex: 1;
            min-width: 300px;
        }
        .wheel-section {
            flex: 2;
            min-width: 400px;
        }
        .stats-section {
            flex: 1;
            min-width: 300px;
        }
        input, button {
            padding: 8px;
            margin: 5px 0;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .wheel {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 0 auto;
            border-radius: 50%;
            background: #0a5c0a;
        }
        .wheel-number {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transform-origin: center;
        }
        .wheel-number.zero {
            background: green;
        }
        .wheel-number.red {
            background: red;
        }
        .wheel-number.black {
            background: black;
        }
        .wheel-number.predicted {
            box-shadow: 0 0 0 3px yellow;
        }
        .correct {
            color: green;
            font-weight: bold;
        }
        .incorrect {
            color: red;
        }
        .streak-warning {
            color: orange;
            font-weight: bold;
        }
        .streak-critical {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Roulette Predictor</h1>
    <div class="container">
        <div class="input-section">
            <h2>Add Spins</h2>
            <div>
                <input type="number" id="spinInput" min="0" max="36" placeholder="Enter number (0-36)">
                <button id="addSpinBtn">Add Spin</button>
                <button id="clearBtn">Clear All</button>
            </div>
            <div>
                <h3>Or paste multiple numbers:</h3>
                <textarea id="bulkInput" rows="5" style="width: 100%;" placeholder="Paste numbers separated by spaces, commas or new lines"></textarea>
                <button id="bulkAddBtn">Add Multiple Spins</button>
            </div>
            <h3>Spin History</h3>
            <table id="historyTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Number</th>
                        <th>Direction</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="wheel-section">
            <h2>Wheel Visualization</h2>
            <div class="wheel" id="wheel"></div>
            <div id="currentPrediction">
                <h3>Current Prediction</h3>
                <p>Direction: <span id="predDirection">-</span></p>
                <p>Center Number: <span id="predCenter">-</span></p>
                <p>Predicted Numbers: <span id="predNumbers">-</span></p>
            </div>
        </div>

        <div class="stats-section">
            <h2>Statistics</h2>
            <p>Total Spins: <span id="totalSpins">0</span></p>
            <p>Predictions Made: <span id="totalPredictions">0</span></p>
            <p>Correct Predictions: <span id="correctPredictions">0</span></p>
            <p>Accuracy: <span id="accuracy">0%</span></p>
            <p>Current Streak: <span id="currentStreak">0</span></p>
            <p>Max Streak: <span id="maxStreak">0</span></p>
            
            <h3>Recent Predictions</h3>
            <table id="predictionTable">
                <thead>
                    <tr>
                        <th>Spin</th>
                        <th>Prediction</th>
                        <th>Actual</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        // European roulette wheel layout (clockwise)
        const europeanWheel = [
            0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
        ];

        // Red numbers on European roulette
        const redNumbers = [32, 19, 21, 25, 34, 27, 36, 30, 23, 5, 16, 1, 14, 9, 18, 7, 12, 3];

        // Application state
        let spins = [];
        let predictions = [];
        let currentStreak = 0;
        let maxStreak = 0;

        // DOM elements
        const spinInput = document.getElementById('spinInput');
        const addSpinBtn = document.getElementById('addSpinBtn');
        const clearBtn = document.getElementById('clearBtn');
        const bulkInput = document.getElementById('bulkInput');
        const bulkAddBtn = document.getElementById('bulkAddBtn');
        const historyTable = document.querySelector('#historyTable tbody');
        const wheel = document.getElementById('wheel');
        const predDirection = document.getElementById('predDirection');
        const predCenter = document.getElementById('predCenter');
        const predNumbers = document.getElementById('predNumbers');
        const predictionTable = document.querySelector('#predictionTable tbody');
        const totalSpins = document.getElementById('totalSpins');
        const totalPredictions = document.getElementById('totalPredictions');
        const correctPredictions = document.getElementById('correctPredictions');
        const accuracy = document.getElementById('accuracy');
        const currentStreakDisplay = document.getElementById('currentStreak');
        const maxStreakDisplay = document.getElementById('maxStreak');

        // Initialize the wheel
        function initWheel() {
            wheel.innerHTML = '';
            const radius = 180;
            const center = 200;
            const angleStep = (2 * Math.PI) / europeanWheel.length;

            europeanWheel.forEach((num, index) => {
                const angle = index * angleStep;
                const x = center + radius * Math.sin(angle);
                const y = center - radius * Math.cos(angle);

                const numberElement = document.createElement('div');
                numberElement.className = 'wheel-number';
                numberElement.textContent = num;
                numberElement.id = `wheel-${num}`;
                numberElement.style.left = `${x}px`;
                numberElement.style.top = `${y}px`;

                if (num === 0) {
                    numberElement.classList.add('zero');
                } else if (redNumbers.includes(num)) {
                    numberElement.classList.add('red');
                } else {
                    numberElement.classList.add('black');
                }

                wheel.appendChild(numberElement);
            });
        }

        // Add a single spin
        function addSpin(number) {
            const num = parseInt(number);
            if (isNaN(num) || num < 0 || num > 36) {
                alert('Please enter a number between 0 and 36');
                return;
            }

            const lastDirection = spins.length === 0 ? 'CCW' : 
                                spins[spins.length - 1].direction === 'CW' ? 'CCW' : 'CW';
            
            const newSpin = { number: num, direction: lastDirection };
            spins.push(newSpin);
            updateHistoryTable();

            // Make prediction if we have at least one previous spin
            if (spins.length > 1) {
                makePrediction();
            }

            updateStats();
            spinInput.value = '';
        }

        // Make a prediction based on last spin
        function makePrediction() {
            const lastSpin = spins[spins.length - 2]; // Previous spin
            const currentSpin = spins[spins.length - 1]; // Current spin
            
            const nextDirection = lastSpin.direction === 'CW' ? 'CCW' : 'CW';
            const wheelOrder = nextDirection === 'CW' ? [...europeanWheel] : [...europeanWheel].reverse();
            
            const centerIndex = wheelOrder.indexOf(lastSpin.number);
            const predictedNumbers = [];
            
            for (let i = -9; i <= 9; i++) {
                const neighborIndex = (centerIndex + i + wheelOrder.length) % wheelOrder.length;
                predictedNumbers.push(wheelOrder[neighborIndex]);
            }
            
            const isCorrect = predictedNumbers.includes(currentSpin.number);
            
            if (isCorrect) {
                currentStreak = 0;
            } else {
                currentStreak++;
                if (currentStreak > maxStreak) {
                    maxStreak = currentStreak;
                }
            }
            
            const prediction = {
                spinNumber: spins.length,
                direction: nextDirection,
                center: lastSpin.number,
                predictedNumbers,
                actual: currentSpin.number,
                correct: isCorrect,
                streak: currentStreak
            };
            
            predictions.push(prediction);
            updatePredictionDisplay(prediction);
            updatePredictionTable();
            highlightPredictedNumbers(predictedNumbers);
        }

        // Update the history table
        function updateHistoryTable() {
            historyTable.innerHTML = '';
            spins.forEach((spin, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${spin.number}</td>
                    <td>${spin.direction}</td>
                `;
                historyTable.appendChild(row);
            });
        }

        // Update the prediction display
        function updatePredictionDisplay(prediction) {
            predDirection.textContent = prediction.direction;
            predCenter.textContent = prediction.center;
            predNumbers.textContent = prediction.predictedNumbers.join(', ');
        }

        // Update the prediction table
        function updatePredictionTable() {
            predictionTable.innerHTML = '';
            predictions.slice().reverse().slice(0, 10).forEach(pred => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${pred.spinNumber}</td>
                    <td>${pred.predictedNumbers.join(', ')}</td>
                    <td>${pred.actual}</td>
                    <td class="${pred.correct ? 'correct' : 'incorrect'}">
                        ${pred.correct ? '✓' : '✗'}
                        ${pred.streak > 3 ? ` (${pred.streak})` : ''}
                    </td>
                `;
                if (pred.streak >= 4 && pred.streak < 6) {
                    row.querySelector('td:last-child').classList.add('streak-warning');
                } else if (pred.streak >= 6) {
                    row.querySelector('td:last-child').classList.add('streak-critical');
                }
                predictionTable.appendChild(row);
            });
        }

        // Highlight predicted numbers on the wheel
        function highlightPredictedNumbers(numbers) {
            // Clear previous highlights
            document.querySelectorAll('.wheel-number').forEach(el => {
                el.classList.remove('predicted');
            });
            
            // Add new highlights
            numbers.forEach(num => {
                const el = document.getElementById(`wheel-${num}`);
                if (el) el.classList.add('predicted');
            });
        }

        // Update statistics
        function updateStats() {
            totalSpins.textContent = spins.length;
            totalPredictions.textContent = predictions.length;
            
            const correct = predictions.filter(p => p.correct).length;
            correctPredictions.textContent = correct;
            
            const acc = predictions.length > 0 ? Math.round((correct / predictions.length) * 100) : 0;
            accuracy.textContent = `${acc}%`;
            
            currentStreakDisplay.textContent = currentStreak;
            maxStreakDisplay.textContent = maxStreak;
            
            // Update streak display color
            if (currentStreak >= 4 && currentStreak < 6) {
                currentStreakDisplay.className = 'streak-warning';
            } else if (currentStreak >= 6) {
                currentStreakDisplay.className = 'streak-critical';
            } else {
                currentStreakDisplay.className = '';
            }
        }

        // Add multiple spins from bulk input
        function addBulkSpins() {
            const input = bulkInput.value.trim();
            if (!input) return;
            
            // Split by any combination of commas, spaces or newlines
            const numbers = input.split(/[\s,]+/).filter(n => n !== '');
            
            numbers.forEach(num => {
                addSpin(num);
            });
            
            bulkInput.value = '';
        }

        // Clear all data
        function clearAll() {
            spins = [];
            predictions = [];
            currentStreak = 0;
            maxStreak = 0;
            
            updateHistoryTable();
            updatePredictionTable();
            updateStats();
            
            predDirection.textContent = '-';
            predCenter.textContent = '-';
            predNumbers.textContent = '-';
            
            // Clear wheel highlights
            document.querySelectorAll('.wheel-number').forEach(el => {
                el.classList.remove('predicted');
            });
        }

        // Event listeners
        addSpinBtn.addEventListener('click', () => addSpin(spinInput.value));
        clearBtn.addEventListener('click', clearAll);
        bulkAddBtn.addEventListener('click', addBulkSpins);
        spinInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addSpin(spinInput.value);
        });

        // Initialize the wheel on load
        window.addEventListener('load', initWheel);
    </script>
</body>
</html>
