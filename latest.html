<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Roulette Predictor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #333;
            text-align: center;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .input-section, .wheel-section, .stats-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-section {
            flex: 1;
            min-width: 300px;
        }
        .wheel-section {
            flex: 2;
            min-width: 400px;
        }
        .stats-section {
            flex: 1;
            min-width: 300px;
        }
        input, button {
            padding: 8px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .wheel {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 20px auto;
            border-radius: 50%;
            background: #0a5c0a;
        }
        .wheel-number {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transform-origin: center;
        }
        .wheel-number.zero {
            background: green;
        }
        .wheel-number.red {
            background: red;
        }
        .wheel-number.black {
            background: black;
        }
        .wheel-number.predicted {
            box-shadow: 0 0 0 3px yellow;
        }
        .wheel-number.high-confidence {
            box-shadow: 0 0 0 3px orange;
        }
        .correct {
            color: green;
            font-weight: bold;
        }
        .incorrect {
            color: red;
        }
        .streak-warning {
            color: orange;
            font-weight: bold;
        }
        .streak-critical {
            color: red;
            font-weight: bold;
        }
        .strategy-info {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f8f8;
            border-radius: 4px;
        }
        textarea {
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Advanced Roulette Predictor</h1>
    <div class="container">
        <div class="input-section">
            <h2>Add Spins</h2>
            <div>
                <input type="number" id="spinInput" min="0" max="36" placeholder="Enter number (0-36)">
                <button id="addSpinBtn">Add Spin</button>
                <button id="clearBtn">Clear All</button>
            </div>
            <div>
                <h3>Or paste multiple numbers:</h3>
                <textarea id="bulkInput" rows="5" placeholder="Paste numbers separated by spaces, commas or new lines"></textarea>
                <button id="bulkAddBtn">Add Multiple Spins</button>
            </div>
            <h3>Spin History</h3>
            <table id="historyTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Number</th>
                        <th>Color</th>
                        <th>Section</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="wheel-section">
            <h2>Wheel Visualization</h2>
            <div class="wheel" id="wheel"></div>
            <div id="currentPrediction">
                <h3>Current Prediction</h3>
                <p>Strategy: <span id="predStrategy">-</span></p>
                <p>Predicted Numbers: <span id="predNumbers">-</span></p>
                <p>Confidence: <span id="predConfidence">-</span></p>
                <div class="strategy-info" id="strategyInfo"></div>
            </div>
        </div>

        <div class="stats-section">
            <h2>Statistics</h2>
            <p>Total Spins: <span id="totalSpins">0</span></p>
            <p>Predictions Made: <span id="totalPredictions">0</span></p>
            <p>Correct Predictions: <span id="correctPredictions">0</span></p>
            <p>Accuracy: <span id="accuracy">0%</span></p>
            <p>Current Streak: <span id="currentStreak">0</span></p>
            <p>Max Streak: <span id="maxStreak">0</span></p>
            
            <h3>Strategy Performance</h3>
            <table id="strategyTable">
                <thead>
                    <tr>
                        <th>Strategy</th>
                        <th>Used</th>
                        <th>Correct</th>
                        <th>Accuracy</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <h3>Recent Predictions</h3>
            <table id="predictionTable">
                <thead>
                    <tr>
                        <th>Spin</th>
                        <th>Prediction</th>
                        <th>Actual</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        // European roulette wheel layout (clockwise)
        const europeanWheel = [
            0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
        ];

        // Red numbers on European roulette
        const redNumbers = [32, 19, 21, 25, 34, 27, 36, 30, 23, 5, 16, 1, 14, 9, 18, 7, 12, 3];

        // Wheel sections (divided into 6 sections)
        const wheelSections = [
            [0, 32, 15, 19, 4, 21, 2],    // Section 1
            [25, 17, 34, 6, 27, 13, 36],  // Section 2
            [11, 30, 8, 23, 10, 5, 24],   // Section 3
            [16, 33, 1, 20, 14, 31, 9],   // Section 4
            [22, 18, 29, 7, 28, 12, 35],  // Section 5
            [3, 26]                        // Section 6 (smaller section)
        ];

        // Number neighbors (numbers physically close on the wheel)
        const wheelNeighbors = {
            0: [32, 15, 26, 3],
            32: [0, 15, 19, 26],
            15: [0, 32, 19, 4],
            19: [32, 15, 4, 21],
            4: [15, 19, 21, 2],
            21: [19, 4, 2, 25],
            2: [4, 21, 25, 17],
            25: [21, 2, 17, 34],
            17: [2, 25, 34, 6],
            34: [25, 17, 6, 27],
            6: [17, 34, 27, 13],
            27: [34, 6, 13, 36],
            13: [6, 27, 36, 11],
            36: [27, 13, 11, 30],
            11: [13, 36, 30, 8],
            30: [36, 11, 8, 23],
            8: [11, 30, 23, 10],
            23: [30, 8, 10, 5],
            10: [8, 23, 5, 24],
            5: [23, 10, 24, 16],
            24: [10, 5, 16, 33],
            16: [5, 24, 33, 1],
            33: [24, 16, 1, 20],
            1: [16, 33, 20, 14],
            20: [33, 1, 14, 31],
            14: [1, 20, 31, 9],
            31: [20, 14, 9, 22],
            9: [14, 31, 22, 18],
            22: [31, 9, 18, 29],
            18: [9, 22, 29, 7],
            29: [22, 18, 7, 28],
            7: [18, 29, 28, 12],
            28: [29, 7, 12, 35],
            12: [7, 28, 35, 3],
            35: [28, 12, 3, 26],
            3: [12, 35, 26, 0],
            26: [35, 3, 0, 32]
        };

        // Application state
        let spins = [];
        let predictions = [];
        let currentStreak = 0;
        let maxStreak = 0;
        let strategyPerformance = {
            'neighbors': { used: 0, correct: 0 },
            'section': { used: 0, correct: 0 },
            'color': { used: 0, correct: 0 },
            'opposite': { used: 0, correct: 0 }
        };

        // DOM elements
        const spinInput = document.getElementById('spinInput');
        const addSpinBtn = document.getElementById('addSpinBtn');
        const clearBtn = document.getElementById('clearBtn');
        const bulkInput = document.getElementById('bulkInput');
        const bulkAddBtn = document.getElementById('bulkAddBtn');
        const historyTable = document.querySelector('#historyTable tbody');
        const wheel = document.getElementById('wheel');
        const predStrategy = document.getElementById('predStrategy');
        const predNumbers = document.getElementById('predNumbers');
        const predConfidence = document.getElementById('predConfidence');
        const strategyInfo = document.getElementById('strategyInfo');
        const predictionTable = document.querySelector('#predictionTable tbody');
        const strategyTable = document.querySelector('#strategyTable tbody');
        const totalSpins = document.getElementById('totalSpins');
        const totalPredictions = document.getElementById('totalPredictions');
        const correctPredictions = document.getElementById('correctPredictions');
        const accuracy = document.getElementById('accuracy');
        const currentStreakDisplay = document.getElementById('currentStreak');
        const maxStreakDisplay = document.getElementById('maxStreak');

        // Initialize the wheel
        function initWheel() {
            wheel.innerHTML = '';
            const radius = 180;
            const center = 200;
            const angleStep = (2 * Math.PI) / europeanWheel.length;

            europeanWheel.forEach((num, index) => {
                const angle = index * angleStep;
                const x = center + radius * Math.sin(angle);
                const y = center - radius * Math.cos(angle);

                const numberElement = document.createElement('div');
                numberElement.className = 'wheel-number';
                numberElement.textContent = num;
                numberElement.id = `wheel-${num}`;
                numberElement.style.left = `${x}px`;
                numberElement.style.top = `${y}px`;

                if (num === 0) {
                    numberElement.classList.add('zero');
                } else if (redNumbers.includes(num)) {
                    numberElement.classList.add('red');
                } else {
                    numberElement.classList.add('black');
                }

                wheel.appendChild(numberElement);
            });
        }

        // Get the wheel section for a number
        function getSection(number) {
            for (let i = 0; i < wheelSections.length; i++) {
                if (wheelSections[i].includes(number)) {
                    return i + 1;
                }
            }
            return 0;
        }

        // Get the color for a number
        function getColor(number) {
            if (number === 0) return 'green';
            return redNumbers.includes(number) ? 'red' : 'black';
        }

        // Add a single spin
        function addSpin(number) {
            const num = parseInt(number);
            if (isNaN(num)) {
                alert('Please enter a valid number');
                return;
            }
            if (num < 0 || num > 36) {
                alert('Please enter a number between 0 and 36');
                return;
            }

            const newSpin = { 
                number: num,
                color: getColor(num),
                section: getSection(num)
            };
            
            spins.push(newSpin);
            updateHistoryTable();

            // Make prediction if we have at least one previous spin
            if (spins.length > 1) {
                makePrediction();
            }

            updateStats();
            spinInput.value = '';
        }

        // Make a prediction based on previous spins
        function makePrediction() {
            const lastSpin = spins[spins.length - 2]; // Previous spin
            const currentSpin = spins[spins.length - 1]; // Current spin
            
            // Choose prediction strategy based on recent performance and streak
            let strategy;
            let predictedNumbers = [];
            let confidence = "Medium";
            let strategyExplanation = "";
            
            // If we're on a losing streak, switch to more conservative strategies
            if (currentStreak >= 3) {
                // On streak, use broader predictions
                if (currentStreak >= 5) {
                    // Critical streak - use very broad prediction
                    strategy = 'section';
                    const sectionIndex = lastSpin.section - 1;
                    predictedNumbers = [...wheelSections[sectionIndex]];
                    confidence = "Low";
                    strategyExplanation = `Using section prediction (${lastSpin.section}) due to long losing streak (${currentStreak})`;
                } else {
                    // Moderate streak - use color prediction
                    strategy = 'color';
                    predictedNumbers = lastSpin.color === 'red' ? 
                        redNumbers : 
                        europeanWheel.filter(n => n !== 0 && !redNumbers.includes(n));
                    confidence = "Medium";
                    strategyExplanation = `Using color prediction (${lastSpin.color}) due to losing streak (${currentStreak})`;
                }
            } else {
                // No streak - use normal strategies
                const strategyOptions = [];
                
                // Add neighbors strategy (high precision)
                strategyOptions.push({
                    name: 'neighbors',
                    numbers: wheelNeighbors[lastSpin.number],
                    confidence: 'High',
                    explanation: `Predicting neighbors of ${lastSpin.number} (high precision)`
                });
                
                // Add section strategy (medium precision)
                const sectionIndex = lastSpin.section - 1;
                strategyOptions.push({
                    name: 'section',
                    numbers: [...wheelSections[sectionIndex]],
                    confidence: 'Medium',
                    explanation: `Predicting same section as ${lastSpin.number} (section ${lastSpin.section})`
                });
                
                // Add color strategy (low precision)
                strategyOptions.push({
                    name: 'color',
                    numbers: lastSpin.color === 'red' ? 
                        redNumbers : 
                        europeanWheel.filter(n => n !== 0 && !redNumbers.includes(n)),
                    confidence: 'Low',
                    explanation: `Predicting same color as ${lastSpin.number} (${lastSpin.color})`
                });
                
                // Add opposite strategy (for variety)
                strategyOptions.push({
                    name: 'opposite',
                    numbers: lastSpin.color === 'red' ? 
                        europeanWheel.filter(n => n !== 0 && !redNumbers.includes(n)) :
                        redNumbers,
                    confidence: 'Medium',
                    explanation: `Predicting opposite color of ${lastSpin.number} (${lastSpin.color === 'red' ? 'black' : 'red'})`
                });
                
                // Choose the best strategy based on past performance
                let bestScore = -Infinity;
                let bestStrategy = strategyOptions[0];
                
                for (const option of strategyOptions) {
                    const perf = strategyPerformance[option.name];
                    const accuracy = perf.used > 0 ? (perf.correct / perf.used) : 0.5;
                    const weight = option.confidence === 'High' ? 1.2 : 
                                 option.confidence === 'Medium' ? 1.0 : 0.8;
                    const score = accuracy * weight;
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestStrategy = option;
                    }
                }
                
                strategy = bestStrategy.name;
                predictedNumbers = bestStrategy.numbers;
                confidence = bestStrategy.confidence;
                strategyExplanation = bestStrategy.explanation;
            }
            
            // Check if prediction was correct
            const isCorrect = predictedNumbers.includes(currentSpin.number);
            
            // Update streaks
            if (isCorrect) {
                currentStreak = 0;
            } else {
                currentStreak++;
                if (currentStreak > maxStreak) {
                    maxStreak = currentStreak;
                }
            }
            
            // Update strategy performance
            strategyPerformance[strategy].used++;
            if (isCorrect) {
                strategyPerformance[strategy].correct++;
            }
            
            const prediction = {
                spinNumber: spins.length,
                strategy: strategy,
                predictedNumbers: predictedNumbers,
                actual: currentSpin.number,
                correct: isCorrect,
                streak: currentStreak,
                confidence: confidence
            };
            
            predictions.push(prediction);
            updatePredictionDisplay(prediction, strategyExplanation);
            updatePredictionTable();
            updateStrategyTable();
            highlightPredictedNumbers(predictedNumbers, confidence);
        }

        // Update the history table
        function updateHistoryTable() {
            historyTable.innerHTML = '';
            spins.forEach((spin, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${spin.number}</td>
                    <td style="color: ${spin.color === 'red' ? 'red' : spin.color === 'black' ? 'black' : 'green'}">${spin.color}</td>
                    <td>${spin.section}</td>
                `;
                historyTable.appendChild(row);
            });
        }

        // Update the prediction display
        function updatePredictionDisplay(prediction, explanation) {
            predStrategy.textContent = prediction.strategy;
            predNumbers.textContent = prediction.predictedNumbers.join(', ');
            predConfidence.textContent = prediction.confidence;
            strategyInfo.textContent = explanation;
        }

        // Update the prediction table
        function updatePredictionTable() {
            predictionTable.innerHTML = '';
            predictions.slice().reverse().slice(0, 10).forEach(pred => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${pred.spinNumber}</td>
                    <td>${pred.predictedNumbers.join(', ')}</td>
                    <td>${pred.actual}</td>
                    <td class="${pred.correct ? 'correct' : 'incorrect'}">
                        ${pred.correct ? '✓' : '✗'}
                        ${pred.streak > 2 ? ` (${pred.streak})` : ''}
                    </td>
                `;
                if (pred.streak >= 3 && pred.streak < 5) {
                    row.querySelector('td:last-child').classList.add('streak-warning');
                } else if (pred.streak >= 5) {
                    row.querySelector('td:last-child').classList.add('streak-critical');
                }
                predictionTable.appendChild(row);
            });
        }

        // Update the strategy performance table
        function updateStrategyTable() {
            strategyTable.innerHTML = '';
            Object.entries(strategyPerformance).forEach(([strategy, perf]) => {
                const row = document.createElement('tr');
                const accuracy = perf.used > 0 ? Math.round((perf.correct / perf.used) * 100 : 0;
                row.innerHTML = `
                    <td>${strategy}</td>
                    <td>${perf.used}</td>
                    <td>${perf.correct}</td>
                    <td>${accuracy}%</td>
                `;
                strategyTable.appendChild(row);
            });
        }

        // Highlight predicted numbers on the wheel
        function highlightPredictedNumbers(numbers, confidence) {
            // Clear previous highlights
            document.querySelectorAll('.wheel-number').forEach(el => {
                el.classList.remove('predicted', 'high-confidence');
            });
            
            // Add new highlights
            numbers.forEach(num => {
                const el = document.getElementById(`wheel-${num}`);
                if (el) {
                    el.classList.add('predicted');
                    if (confidence === 'High') {
                        el.classList.add('high-confidence');
                    }
                }
            });
        }

        // Update statistics
        function updateStats() {
            totalSpins.textContent = spins.length;
            totalPredictions.textContent = predictions.length;
            
            const correct = predictions.filter(p => p.correct).length;
            correctPredictions.textContent = correct;
            
            const acc = predictions.length > 0 ? Math.round((correct / predictions.length) * 100) : 0;
            accuracy.textContent = `${acc}%`;
            
            currentStreakDisplay.textContent = currentStreak;
            maxStreakDisplay.textContent = maxStreak;
            
            // Update streak display color
            if (currentStreak >= 3 && currentStreak < 5) {
                currentStreakDisplay.className = 'streak-warning';
            } else if (currentStreak >= 5) {
                currentStreakDisplay.className = 'streak-critical';
            } else {
                currentStreakDisplay.className = '';
            }
        }

        // Add multiple spins from bulk input
        function addBulkSpins() {
            const input = bulkInput.value.trim();
            if (!input) {
                alert('Please enter some numbers first');
                return;
            }
            
            // Split by any combination of commas, spaces or newlines
            const numbers = input.split(/[\s,]+/).filter(n => n !== '');
            
            numbers.forEach(num => {
                const parsedNum = parseInt(num);
                if (!isNaN(parsedNum) {
                    addSpin(parsedNum);
                }
            });
            
            bulkInput.value = '';
        }

        // Clear all data
        function clearAll() {
            spins = [];
            predictions = [];
            currentStreak = 0;
            maxStreak = 0;
            
            // Reset strategy performance
            strategyPerformance = {
                'neighbors': { used: 0, correct: 0 },
                'section': { used: 0, correct: 0 },
                'color': { used: 0, correct: 0 },
                'opposite': { used: 0, correct: 0 }
            };
            
            updateHistoryTable();
            updatePredictionTable();
            updateStrategyTable();
            updateStats();
            
            predStrategy.textContent = '-';
            predNumbers.textContent = '-';
            predConfidence.textContent = '-';
            strategyInfo.textContent = '';
            
            // Clear wheel highlights
            document.querySelectorAll('.wheel-number').forEach(el => {
                el.classList.remove('predicted', 'high-confidence');
            });
        }

        // Event listeners
        addSpinBtn.addEventListener('click', () => {
            if (spinInput.value.trim() === '') {
                alert('Please enter a number first');
                return;
            }
            addSpin(spinInput.value);
        });
        
        clearBtn.addEventListener('click', clearAll);
        bulkAddBtn.addEventListener('click', addBulkSpins);
        
        spinInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (spinInput.value.trim() === '') {
                    alert('Please enter a number first');
                    return;
                }
                addSpin(spinInput.value);
            }
        });

        // Initialize the wheel on load
        window.addEventListener('load', initWheel);
    </script>
</body>
</html>
